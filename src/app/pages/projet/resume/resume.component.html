<div class="row">
  <!-- Cartes de statistiques -->
  <div class="col-xxxl-3 col-md-6" *ngFor="let stat of [
    { icon: 'checkmark-circle-outline', value: stats.termines, label: 'élément(s) terminé(s)', subLabel: 'au cours des 7 derniers jours' },
    { icon: 'edit-outline', value: stats.misAJour, label: 'élément(s) mis à jour', subLabel: 'au cours des 7 derniers jours' },
    { icon: 'file-add-outline', value: stats.crees, label: 'élément(s) créé(s)', subLabel: 'au cours des 7 derniers jours' },
    { icon: 'calendar-outline', value: stats.echeanceProche, label: 'à échéance proche', subLabel: 'dans les 7 prochains jours' }
  ]">
    <nb-card class="stat-card">
      <nb-card-body>
        <div class="d-flex align-items-center">
          <nb-icon [icon]="stat.icon" class="mr-3"></nb-icon>
          <div>
            <div class="h4 mb-0">{{ stat.value }} {{ stat.label }}</div>
            <small class="text-hint">{{ stat.subLabel }}</small>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="row">
  <!-- Vue d'ensemble de l'état -->
  <div class="col-xxxl-6 col-md-6">
    <nb-card>
      <nb-card-header>
        Vue d'ensemble des listes
        <small class="text-hint ml-2">État des tâches dans les listes</small>
      </nb-card-header>
      <nb-card-body>
        <ngx-charts-pie-chart
          [results]="etatChartData"
          [legend]="true"
          [labels]="true"
          [view]="[500, 200]"
          [scheme]="{ domain: ['#002366', '#FFD700', '#C0C0C0'] }">
        </ngx-charts-pie-chart>
      </nb-card-body>
    </nb-card>
  </div>

  <!-- Graphique des priorités -->
  <div class="col-xxxl-6 col-md-6">
    <nb-card>
      <nb-card-header>
        Distribution des priorités
      </nb-card-header>
      <nb-card-body>
        <ngx-charts-bar-vertical
          [results]="priorityChartData"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="false"
          [showYAxisLabel]="false"
          [barPadding]="20"
          [roundDomains]="true"
          [maxYAxisTickLength]="16"
          [view]="[500, 200]"
          [scheme]="{ domain: ['#002366'] }">
        </ngx-charts-bar-vertical>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="row">
  <!-- Types de ticket -->
  <div class="col-xxxl-6 col-md-6">
    <nb-card>
      <nb-card-header>
        Types de ticket
        <small class="text-hint ml-2">Répartition des tickets par type</small>
      </nb-card-header>
      <nb-card-body>
        <div class="d-flex justify-content-between align-items-center mb-3" *ngFor="let type of [
          { icon: 'checkmark-square-outline', label: 'Tâche', value: typeData.tache },
          { icon: 'list-outline', label: 'Sous-tâche', value: typeData.sousTache }
        ]">
          <div class="d-flex align-items-center">
            <nb-icon [icon]="type.icon" class="mr-2"></nb-icon>
            <span>{{ type.label }}</span>
          </div>
          <div class="progress flex-grow-1 mx-3" style="height: 8px;">
            <div class="progress-bar" [style.width.%]="type.value"></div>
          </div>
          <span>{{ type.value }}%</span>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div> 